---
title: 新人エンジニアがアーキテクチャConferenceに参加して学べたこと
tags:
  - 'アーキテクチャ'
  - 'アーキテクト'
  - 'マイクロサービス'
  - 'DDD'
  - '設計'
private: false
updated_at: ''
id: null
organization_url_name: null
slide: false
ignorePublish: false
---

## アーキテクチャカンファレンスとは？

「**アーキテクチャの構想・判断・構築にまつわるリアルな知見**を共有し、多角的な視点から設計判断への理解を深め、自社にとって最適な構成を考えるための視点とヒントを、実践に繋げる形で持ち帰る場」です。（[アーキテクチャConference2025](https://architecture-con.findy-tools.io/2025)より）

この説明の通り、様々な企業が実際に使用しているアーキテクチャ図が掲載されているブースや、各企業の紹介と用いているアーキテクチャについて説明をしてくださる企業ブースがあり、リアルにアーキテクチャを設計、開発している方々の生の声を聞くことができました。
登壇セッションだけでなく、企業ブースでもかなりの知見を得ることができる非常に有意義な会でした。
そんなアーキテクチャカンファレンスで得られたアーキテクチャに関する学びを共有したいと思います。

## マイクロサービスの複雑さとどう向き合うか？

多くの企業がマイクロサービスという複雑なアーキテクチャに挑戦し、その多くは失敗をしています。
実際、ブースを設けていた企業の中にもマイクロサービスを試してみて失敗をしたというところもありました。
では、なぜその様なことが起きるのでしょうか？また、どのようにしてこの複雑さと向き合うべきなのでしょうか？

### マイクロサービスが最適解か？

まず考えるべきは、**本当にマイクロサービスが最適解だったのか**です。
確かに、マイクロサービスにはメリットがたくさんあります。
独立したデプロイ単位による高頻度なイテレーション、サービスごとにスケーリングができる、など様々な理由が考えられます。
また技術的な挑戦としてマイクロサービスを採用する場合もあるかもしれません。
しかし、本当にそれが最適解でしょうか？

エンドユーザーやあなたの所属する会社はあなたの作るサービスのアーキテクチャに関心はありません。サービスを使うときに、そのサービスの裏側にあるアーキテクチャを機にするユーザーは非常に少ないでしょう。ユーザーたちが気にしているのは、そのサービスの応答速度であり、ユーザー体験であり、システムが正しく動作するかなのです。
その目標が達成できればアーキテクチャはモノリスでもマイクロサービスでも関係ないのです。

**アーキテクチャとはビジネス上の決定である**ということを忘れてはいけません。
大事なのは、**何を達成したいのか**です。

### 大きな泥団子との戦い

そうは言っても、モノリスのままサービスを拡大し続けるのは困難です。
関心の分離がされていないサービス群、一時的な動作のために導入したコードが乱雑に広がっているような状態では、安全にサービスの更新を行うことも難しくなっていきます。
では、そのような状態からどのようにして整理された状態へと移行するのでしょうか？

まずは依存関係が少ないものから、特にそのサービスのコアとなる機能の中の依存関係が少ない部分からモジュールに切り出します。
そして徐々に様々なモジュールへと切り出すことで**モジュラーモノリス**となります。
ここからさらにモジュールをサービスへと切り出すかどうかは、アーキテクチャ上の決定となるので達成したい目的ごとに考える必要があります。

### メッセージ駆動という選択肢

ここまで推してきたモジュラーモノリスですが、このアーキテクチャにも限界があります。
内部構造を論理的に分離することはできていることが多いです。しかし、単一プロセス（独立デプロイ不可）であり、同期呼び出しを使用している場合、時間的分離もできていません。
結果として、
- スケールアップしかできない
- 一部の障害が全体に影響
- デプロイが見つけつごう
- 変更管理が難しい
- モノレポ（単一リポジトリ）として扱うと、各モジュールごとのタグ管理が難しい
という問題が生じます。
かといって、マイクロサービスに移行ができるかと言われたらそれも難しい、という状況があります。

ここで、サービスの結合について考えてみましょう。サービスの結合には以下の三つの種類があります。
- 時間的結合
- 空間的結合
- 読み書きの結合
これらを適切に分離することで。サービスの疎結合を達成することが目標です。

#### 時間的分離

これは非同期メッセージングによって解決します。
サービス間にメッセージ基盤を入れます。そうすることでサービス間の結合を緩和し、非同期に処理することがでいるようになります。
サービスAとサービスBが連携して動作する必要があるときに、その間にメッセージ基盤を挟むことで、サービスAはメッセージ基盤にメッセージを送るだけであとはサービスBがメッセージ基盤にメッセージを読みにいく（購読する）ことで連携して動作させることができるのです。 